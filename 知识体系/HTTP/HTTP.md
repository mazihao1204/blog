### HTTP概述

---

+ web资源(Web resource)：所有能够提供web内容的东西都是web资源

+ 媒体类型

  HTTP会给每种通过web传输的对象都打上名为MIME类型的数据格式标签

  MIME类型是一种文本标记，表示一种主要的对象类型和一个特定的子类型，中间有一条斜杠来分隔

  举个例子：

  + HTML格式的文本文档由text/html类型来标记

+ URI：统一资源标识符，服务器资源名都称为URI

+ URL：同一资源定位符，URL描述了一台特定服务器上某资源的特定位置



#### 常见的状态码：

+ 1xx:	临时回应，表示客户端请继续

+ 200：请求成功
+ 3xx：表示请求的目标有变化，希望客户端进一步处理
  + 301&302：永久性与临时性跳转
+ 4xx：客户端请求错误
  + 403：无权限
  + 404：表示请求的页面不存在
+ 5xx：服务端请求错误
  + 500：服务端错误
  + 503：服务端暂时性错误，可以一会再试



#### TCP/IP

HTTP是个应用层协议。HTTP无需操心网络通信的具体细节；它把联网的细节都交给了通用可靠的因特网传输层协议TCP/IP

TCP/IP提供了：

+ 无差错的数据传输
+ 按需传输，数据总是会按照发送的顺序到达
+ 未分段的数据流:可以在任意时刻以任意尺寸将数据发送出去



#### 浏览器通过HTTP显示位于远端服务器中的某个简单HTML资源的步骤

（1）浏览器从URL中解析出服务器的主机名

（2）浏览器将服务器的主机名转换成服务器的ip地址

（3）浏览器将端口号(如果有的话)从URL中解析出来

（4）浏览器建立一条与web服务器的TCP连接

（5）浏览器向服务器发送一条请求报文

（6）服务器向浏览器回送一条HTTP响应报文

（7）关闭连接，浏览器显示文档



#### 协议版本

+ HTTP/0.9  只支持get方法，不支持多媒体内容的MIME类型，各种HTTP首部，或者版本号
+ HTTP/1.0  第一个广泛使用的HTTP版本，添加了版本号，各种HTTP首部，一些额外的方法，以及对多媒体对象的处理
+ HTTP/1.0+ 增加了keep-alive连接，虚拟主机支持，以及代理连接支持
+ HTTP/1.1  校正HTTP设计中的结构性缺陷，明确语义，引入重要的性能优化措施，并删除一些不好的特性
+ HTTP-NG又称HTTP/2.0：重点关注的是性能的大幅优化，以及更强大的服务逻辑远程执行框架



#### web的结构组件

**代理**：位于客户端与服务器之间的HTTP中间实体

**缓存**：HTTP的仓库，使常用页面的副本可以保存在离客户端最近的地方

**网关**：连接其他应用程序的特殊web服务器

**隧道**：对HTTP通信报文进行盲转发的特殊代理

**Angent代理**：发起自动HTTP请求的半智能web客户端

---

##### 代理

HTTP代理服务器，是web安全，应用集成以及性能优化的重要组成部分

代理服务器位于客户端和服务器之间，接收所有客户端的HTTP请求，并将这些请求转发给服务器，代理还可以对请求和响应进行过滤

##### 缓存

web缓存或称代理缓存：一种特殊的HTTP代理服务器，可以将经过代理传送的常用文档复制保存起来

##### 网关

网关是一种特殊的服务器，作为其他服务器的中间实体使用。通常用于将HTTP流量转换成其他协议

##### 隧道

隧道是建立起来之后，就会在两条连接之间对原始数据进行盲转发的HTTP应用程序。常用来在一条或多条HTTP连接上转发非HTTP数据，转发时不会窥探数据

##### Angent代理

是代表用户发起请求的客户端程序，比如浏览器



#### 报文

HTTP报文是由一行一行的简单字符串组成的，HTTP报文都是纯文本

HTTP报文包括三个部分：

+ 起始行

  报文的第一行就是起始行，在请求报文中用来说明要做些什么，在响应报文中用来说明出现了什么情况

+ 首部字段

  起始行后零个或多个首部字段，每个首部字段都包含一个名字和一个值

  首部以一个空行结束

+ 主体

  空行后就是主体，包含了所有类型的数据

**一个简单的响应报文**

起始行：  HTTP/1.0   200  OK

首部：	  Content-type:	text/plain
		     Content-length:	19

主体：	   Hi! I am message
